<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact - Centre Bethesda</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-white text-gray-800">

<!-- HEADER NAVIGATION -->
<header class="bg-white shadow-md sticky top-0 z-50">
  <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
    <!-- Logo + Titre -->
    <div class="flex items-center space-x-3">
      <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-full overflow-hidden shadow-lg">
        <img src="images/logo.png" alt="Logo Centre Bethesda" class="w-full h-full object-cover">
      </div>
      <h1 class="text-xl sm:text-2xl font-extrabold text-blue-700 tracking-wide">
        Centre Bethesda
      </h1>
    </div>

     <!-- Navigation (desktop) -->
    <nav class="hidden sm:flex items-center space-x-6">
      <div class="flex space-x-2">
        <a href="/centre-bethesda/index.html" class="flex items-center nav-lang text-gray-600 hover:text-blue-600 font-semibold">
          <img src="https://flagcdn.com/fr.svg" alt="Français" class="w-5 h-4 mr-1"> FR
        </a>
        <a href="/centre-bethesda/en/index.html" class="flex items-center nav-lang text-gray-600 hover:text-blue-600 font-semibold">
          <img src="https://flagcdn.com/gb.svg" alt="Anglais" class="w-5 h-4 mr-1"> EN
        </a>
      </div>
      <a href="index.html" class="nav-link text-gray-600 hover:text-blue-600">Accueil</a>
      <a href="mission.html" class="nav-link text-gray-600 hover:text-blue-600">Mission</a>
      <a href="programmes.html" class="nav-link text-gray-600 hover:text-blue-600">Programmes</a>
      <a href="infos-pratiques.html" class="nav-link text-gray-600 hover:text-blue-600">Infos</a>
      <a href="temoignages.html" class="nav-link text-gray-600 hover:text-blue-600">Témoignages</a>
      <a href="contact.html" class="nav-link text-gray-600 hover:text-blue-600">Contact</a>
      <a href="reservation.html" class="nav-link text-gray-600 hover:text-blue-600">Réservation</a>
    </nav>
  </div>

  <!-- Menu mobile -->
  <div id="mobile-menu" class="sm:hidden hidden px-4 pb-4 bg-white border-t border-gray-200">
    <div class="flex space-x-4 mb-2">
      <a href="/centre-bethesda/index.html" class="flex items-center nav-lang text-gray-600 hover:text-blue-600 font-semibold">
        <img src="https://flagcdn.com/fr.svg" alt="Français" class="w-5 h-4 mr-1"> FR
      </a>
      <a href="/centre-bethesda/en/index.html" class="flex items-center nav-lang text-gray-600 hover:text-blue-600 font-semibold">
        <img src="https://flagcdn.com/gb.svg" alt="Anglais" class="w-5 h-4 mr-1"> EN
      </a>
    </div>
    <div class="flex flex-col space-y-2 text-sm">
      <a href="index.html" class="nav-link text-gray-600 hover:text-blue-600">Accueil</a>
      <a href="mission.html" class="nav-link text-gray-600 hover:text-blue-600">Mission</a>
      <a href="programmes.html" class="nav-link text-gray-600 hover:text-blue-600">Programmes</a>
      <a href="infos-pratiques.html" class="nav-link text-gray-600 hover:text-blue-600">Infos</a>
      <a href="temoignages.html" class="nav-link text-gray-600 hover:text-blue-600">Témoignages</a>
      <a href="contact.html" class="nav-link text-gray-600 hover:text-blue-600">Contact</a>
      <a href="reservation.html" class="nav-link text-gray-600 hover:text-blue-600">Réservation</a>
    </div>
  </div>
</header>

<!-- ======= Forum d'échanges ======= -->
<section id="forum" class="py-10 px-4 md:px-10 bg-gray-50 rounded-lg shadow-lg max-w-3xl mx-auto mt-10">
  <h2 class="text-2xl md:text-3xl font-bold mb-6 text-center text-blue-800">Forum d'échanges</h2>

  <!-- Utilisateur connecté -->
  <div id="user-display" class="text-sm text-gray-700 mb-6 text-center font-medium">Non connecté</div>

  <!-- Inscription -->
  <form id="register-form" class="space-y-3 mb-6">
    <div class="text-lg font-semibold text-blue-700">Créer un compte</div>
    <input type="email" name="email" placeholder="Email" required class="w-full border rounded px-3 py-2" />
    <input type="password" name="password" placeholder="Mot de passe" required class="w-full border rounded px-3 py-2" />
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full">S'inscrire</button>
  </form>

  <!-- Connexion -->
  <form id="login-form" class="space-y-3 mb-6">
    <div class="text-lg font-semibold text-blue-700">Se connecter</div>
    <input type="email" name="email" placeholder="Email" required class="w-full border rounded px-3 py-2" />
    <input type="password" name="password" placeholder="Mot de passe" required class="w-full border rounded px-3 py-2" />
    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full">Se connecter</button>
  </form>

  <button id="logout-btn" class="mb-6 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 w-full" style="display:none;">Se déconnecter</button>

  <!-- Formulaire message -->
  <form id="forum-form" class="space-y-3 mb-8">
    <input type="text" name="username" placeholder="Nom d'utilisateur" disabled class="w-full border rounded px-3 py-2 bg-gray-100" />
    <textarea name="message" placeholder="Écrivez votre message" required class="w-full border rounded px-3 py-2 min-h-[80px]"></textarea>
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 w-full">Envoyer</button>
  </form>

  <!-- Messages -->
  <div id="forum-messages" class="space-y-4"></div>
</section>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
  import { getFirestore, collection, addDoc, serverTimestamp, onSnapshot, query, orderBy, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBfvjITf4NQyGYUWThoZUZTzPDzzqXF4yo",
    authDomain: "centre-bethesda.firebaseapp.com",
    projectId: "centre-bethesda",
    storageBucket: "centre-bethesda.appspot.com",
    messagingSenderId: "46907722860",
    appId: "1:46907722860:web:3e74127f80f361e4d81c49"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const registerForm = document.getElementById('register-form');
  const loginForm = document.getElementById('login-form');
  const logoutBtn = document.getElementById('logout-btn');
  const forumForm = document.getElementById('forum-form');
  const userDisplay = document.getElementById('user-display');
  const messagesDiv = document.getElementById('forum-messages');

  registerForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = registerForm.email.value;
    const password = registerForm.password.value;
    try {
      await createUserWithEmailAndPassword(auth, email, password);
      alert('Inscription réussie !');
      registerForm.reset();
    } catch (error) {
      alert('Erreur inscription : ' + error.message);
    }
  });

  loginForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = loginForm.email.value;
    const password = loginForm.password.value;
    try {
      await signInWithEmailAndPassword(auth, email, password);
      alert('Connexion réussie !');
      loginForm.reset();
    } catch (error) {
      alert('Erreur connexion : ' + error.message);
    }
  });

  logoutBtn?.addEventListener('click', () => signOut(auth));

  onAuthStateChanged(auth, (user) => {
    if (user) {
      userDisplay.textContent = `Connecté en tant que : ${user.email}`;
      logoutBtn.style.display = 'inline-block';
      forumForm.username.value = user.email;
      forumForm.username.disabled = true;
    } else {
      userDisplay.textContent = 'Non connecté';
      logoutBtn.style.display = 'none';
      forumForm.username.value = '';
      forumForm.username.disabled = false;
    }
  });

  forumForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const message = forumForm.message.value.trim();
    const user = auth.currentUser;
    if (!user) return alert('Vous devez être connecté pour poster un message.');
    if (!message) return;

    try {
      await addDoc(collection(db, "messages"), {
        uid: user.uid,
        username: user.email,
        message,
        timestamp: serverTimestamp()
      });
      forumForm.message.value = '';
    } catch (error) {
      console.error("Erreur Firestore :", error);
      alert("Échec de l'envoi du message.");
    }
  });

  const q = query(collection(db, "messages"), orderBy("timestamp", "desc"));
  onSnapshot(q, (snapshot) => {
    messagesDiv.innerHTML = '';
    snapshot.forEach(docSnap => {
      const data = docSnap.data();
      const el = createMessageElement(docSnap.id, data);
      messagesDiv.appendChild(el);
    });
  });

  function createMessageElement(id, data) {
    const container = document.createElement('div');
    container.style.border = "1px solid #ccc";
    container.style.padding = "10px";
    container.style.background = "#f9f9f9";

    const meta = document.createElement('small');
    meta.innerHTML = `<strong>${data.username}</strong> — ${formatDate(data.timestamp)}`;

    const content = document.createElement('p');
    content.textContent = data.message;

    container.appendChild(meta);
    container.appendChild(content);

    const user = auth.currentUser;
    if (user && user.uid === data.uid) {
      const editBtn = document.createElement('button');
      editBtn.textContent = "Modifier";
      editBtn.onclick = () => editMessage(id, content);

      const delBtn = document.createElement('button');
      delBtn.textContent = "Supprimer";
      delBtn.onclick = () => deleteDoc(doc(db, "messages", id));

      container.appendChild(editBtn);
      container.appendChild(delBtn);
    }

    return container;
  }

  function editMessage(id, contentEl) {
    const old = contentEl.textContent;
    const ta = document.createElement('textarea');
    ta.value = old;
    contentEl.replaceWith(ta);

    const saveBtn = document.createElement('button');
    saveBtn.textContent = "Enregistrer";
    ta.after(saveBtn);

    saveBtn.onclick = async () => {
      const newText = ta.value.trim();
      if (newText) {
        await updateDoc(doc(db, "messages", id), {
          message: newText,
          edited: serverTimestamp()
        });
        saveBtn.remove();
        ta.replaceWith(contentEl);
        contentEl.textContent = newText;
      }
    };
  }

  function formatDate(ts) {
    if (!ts) return '';
    return new Date(ts.seconds * 1000).toLocaleString('fr-FR', {
      day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit'
    });
  }
</script>

  <!-- FOOTER COMPLET CENTRE BETHESDA -->
<footer class="bg-gray-900 text-white px-6 pt-8 pb-3 mt-12">
  <div class="max-w-6xl mx-auto grid md:grid-cols-3 gap-6">

    <!-- Bloc 1 : Logo + description + réseaux -->
    <div class="space-y-3">
      <div class="flex items-center space-x-3">
        <img src="images/logo.png" alt="Logo Centre Bethesda" class="w-14 h-14 object-contain rounded-full shadow-lg">
        <div>
          <h2 class="text-lg font-bold uppercase tracking-wider leading-tight">Centre Bethesda</h2>
          <p class="text-sm text-gray-300 leading-snug">Retraites spirituelles & transformation intérieure</p>
        </div>
      </div>
      <div class="flex space-x-4">
        <!-- Facebook -->
        <a href="https://www.facebook.com/P.P.E.Pastorale/mentions/" target="_blank" class="text-gray-400 hover:text-white" aria-label="Facebook">
          <svg fill="currentColor" class="w-5 h-5" viewBox="0 0 24 24"><path d="M22 12a10 10 0 1 0-11.5 9.9v-7H8v-3h2.5V9.5c0-2.5 1.5-3.9 3.8-3.9 1.1 0 2.3.2 2.3.2v2.5h-1.3c-1.3 0-1.7.8-1.7 1.6V12h3l-.5 3h-2.5v7A10 10 0 0 0 22 12z"/></svg>
        </a>
        <!-- Instagram -->
        <a href="https://www.instagram.com/pastorale_ppe/" target="_blank" class="text-gray-400 hover:text-white" aria-label="Instagram">
          <svg fill="currentColor" class="w-5 h-5" viewBox="0 0 24 24"><path d="M7 2C4.8 2 3 3.8 3 6v12c0 2.2 1.8 4 4 4h10c2.2 0 4-1.8 4-4V6c0-2.2-1.8-4-4-4H7zm5 5a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm6.5-.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/></svg>
        </a>
        <!-- WhatsApp -->
        <a href="https://wa.me/2250103881311" target="_blank" class="text-gray-400 hover:text-white" aria-label="WhatsApp">
          <svg fill="currentColor" class="w-5 h-5" viewBox="0 0 32 32"><path d="M16 .5a15.5 15.5 0 0 0-13 24.1l-2 7.4 7.6-2A15.5 15.5 0 1 0 16 .5zm0 28.1a12.5 12.5 0 0 1-6.6-1.8l-.5-.3-4.5 1.2 1.2-4.4-.3-.5a12.5 12.5 0 1 1 11.1 5.8zm6.3-9.3c-.3-.1-1.9-.9-2.2-1s-.5-.1-.8.2-1 1.2-1.2 1.4-.4.2-.7.1-1.4-.5-2.7-1.7a10.1 10.1 0 0 1-1.8-2.2c-.2-.4 0-.6.1-.8s.3-.4.5-.6l.2-.3c.1-.1.2-.2.3-.3s.1-.2.2-.4a.7.7 0 0 0 0-.5c-.1-.1-.8-1.9-1.1-2.6s-.5-.6-.7-.6h-.5a1.3 1.3 0 0 0-1 .5 4.1 4.1 0 0 0-1.2 3c0 1.8 1.3 3.5 1.5 3.7a15.6 15.6 0 0 0 6.6 5.4 5.5 5.5 0 0 0 2.6.7c.8 0 1.6-.2 2-.5s1.2-1 1.3-2.1-.1-1.4-.3-1.6z"/></svg>
        </a>
        <!-- YouTube -->
        <a href="https://www.youtube.com/@ppewebtv" target="_blank" class="text-gray-400 hover:text-white" aria-label="YouTube">
          <svg fill="currentColor" class="w-6 h-6" viewBox="0 0 576 512"><path d="M549.7 124.1c-6.3-23.7-24.9-42.3-48.6-48.6C465.5 64 288 64 288 64S110.5 64 74.9 75.5C51.2 81.8 32.6 100.4 26.3 124.1 16 163.3 16 256 16 256s0 92.7 10.3 131.9c6.3 23.7 24.9 42.3 48.6 48.6C110.5 448 288 448 288 448s177.5 0 213.1-11.5c23.7-6.3 42.3-24.9 48.6-48.6C560 348.7 560 256 560 256s0-92.7-10.3-131.9zM232 336V176l142 80-142 80z"/></svg>
        </a>
      </div>
    </div>

    <!-- Bloc 2 : Newsletter -->
    <div class="space-y-2">
      <h3 class="text-white text-lg font-semibold">📬 Inscription à la Newsletter</h3>
      <p class="text-gray-400 text-sm">Recevez nos méditations, actualités et programmes par e-mail.</p>
      <form onsubmit="handleSubmit(event)" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
        <input type="email" name="email" required placeholder="Email *" class="px-4 py-2 rounded text-gray-800 w-full focus:outline-none focus:ring-2 focus:ring-blue-400">
        <input type="text" name="fname" placeholder="Prénom" class="px-4 py-2 rounded text-gray-800 w-full focus:outline-none focus:ring-2 focus:ring-blue-400">
        <input type="text" name="lname" placeholder="Nom" class="px-4 py-2 rounded text-gray-800 w-full focus:outline-none focus:ring-2 focus:ring-blue-400 sm:col-span-2">
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition font-semibold sm:col-span-2">S’abonner</button>
        <p id="formMessage" class="text-sm text-center sm:col-span-2 mt-2 hidden"></p>
      </form>
    </div>

    <!-- Bloc 3 : Infos rapides -->
    <div class="space-y-1 text-sm text-gray-300">
      <p>📍 <a href="https://maps.app.goo.gl/VhycG7pf7zQREPY36" target="_blank" class="hover:text-white underline">Route de Yamoussoukro, Côte d'Ivoire</a></p>
      <p>📞 <a href="tel:+2250103881311" class="hover:text-white underline">(+225) 01 03 88 13 11</a></p>
      <p>✉️ <a href="mailto:infos@ppe-ci.org" class="hover:text-white underline">infos@ppe-ci.org</a></p>
      <p>⏰ Lundi – Dimanche : 8h à 18h</p>
    </div>

  </div>

  <div class="mt-6 border-t border-gray-700 pt-3 text-sm text-center text-gray-500">
    &copy; 2025 Centre de Retraite Spirituelle Bethesda. Tous droits réservés.
  </div>
</footer>

<!-- Script pour soumission du formulaire newsletter -->
<script>
  async function handleSubmit(event) {
    event.preventDefault();
    const form = event.target;
    const data = new FormData(form);
    const messageEl = document.getElementById('formMessage');
    try {
      const res = await fetch("https://script.google.com/macros/s/AKfycbyd67y3ejduEIO4hDzOL1bm0mq5DrB-92fu7QoSFgIKuLLp5-UHabtVeFdD2DhzythQOw/exec", {
        method: "POST",
        body: data
      });
      const json = await res.json();
      messageEl.classList.remove("hidden");
      if (json.result === "success") {
        messageEl.textContent = "✅ Abonnement réussi. Merci !";
        messageEl.classList.add("text-green-500");
        form.reset();
      } else {
        messageEl.textContent = "❌ Erreur : " + json.message;
        messageEl.classList.add("text-red-500");
      }
    } catch (err) {
      messageEl.classList.remove("hidden");
      messageEl.textContent = "❌ Erreur serveur. Veuillez réessayer plus tard.";
      messageEl.classList.add("text-red-500");
    }
  }
</script>


<!-- SCRIPT POUR LE MENU MOBILE -->
<script>
  const menuToggle = document.getElementById("menu-toggle");
  const mobileMenu = document.getElementById("mobile-menu");

  menuToggle.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
  });
</script>
  
 <script>
  // ✅ Ajoute le nouveau script ici
  const path = window.location.pathname.split('/').pop() || 'index.html';

  document.querySelectorAll('.nav-link').forEach(link => {
    const href = link.getAttribute('href');
    if (href === path) {
      link.classList.remove('text-gray-600');
      link.classList.add('text-blue-700', 'font-semibold');
    } else {
      link.classList.remove('text-blue-700');
      link.classList.add('text-gray-600');
    }
  });
</script>
  
  
</body>
</html>


