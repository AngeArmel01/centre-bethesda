<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Centre Bethesda – Accueil</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    html { scroll-behavior: smooth; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  
<!-- DATE + VERSET DU JOUR -->
<div class="bg-blue-50 text-blue-900 py-2 px-4 flex justify-between items-center text-sm font-semibold border-b border-blue-200">
  <div id="datetime"></div>
  <marquee behavior="scroll" direction="left" scrollamount="5" class="w-full ml-4 text-center" id="verse"></marquee>
</div>
  
<!-- HEADER -->
<header class="bg-white shadow-md sticky top-0 z-50">
  <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
    <!-- Logo + Titre -->
    <div class="flex items-center space-x-3">
      <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-full overflow-hidden shadow-lg">
        <img src="images/logo.png" alt="Logo Centre Bethesda" class="w-full h-full object-cover">
      </div>
      <h1 class="text-xl sm:text-2xl font-extrabold text-blue-700 tracking-wide">
        Centre Bethesda
      </h1>
    </div>

    <!-- Bouton menu mobile -->
    <button id="menu-toggle" class="sm:hidden text-blue-700 focus:outline-none text-2xl">
      ☰
    </button>

    <!-- Navigation (desktop) -->
    <nav class="hidden sm:flex items-center space-x-6">
      <div class="flex space-x-2">
        <a href="/centre-bethesda/index.html" class="flex items-center text-blue-700 font-semibold">
          <img src="https://flagcdn.com/fr.svg" alt="Français" class="w-5 h-4 mr-1"> FR
        </a>
        <a href="/centre-bethesda/en/index.html" class="flex items-center text-gray-500 hover:text-blue-600 font-semibold">
          <img src="https://flagcdn.com/gb.svg" alt="Anglais" class="w-5 h-4 mr-1"> EN
        </a>
      </div>
      <a href="index.html" class="text-blue-700 font-semibold">Accueil</a>
      <a href="mission.html" class="text-gray-600 hover:text-blue-600">Mission</a>
      <a href="programmes.html" class="text-gray-600 hover:text-blue-600">Programmes</a>
      <a href="infos pratiques.html" class="text-gray-600 hover:text-blue-600">Infos</a>
      <a href="temoignages.html" class="text-gray-600 hover:text-blue-600">Témoignages</a>
      <a href="contact.html" class="text-gray-600 hover:text-blue-600">Contact</a>
      <a href="reservation.html" class="text-gray-600 hover:text-blue-600">Réservation</a>
    </nav>
  </div>

  <!-- Menu mobile -->
  <div id="mobile-menu" class="sm:hidden hidden px-4 pb-4 bg-white border-t border-gray-200">
    <div class="flex space-x-4 mb-2">
      <a href="/centre-bethesda/index.html" class="flex items-center text-blue-700 font-semibold">
        <img src="https://flagcdn.com/fr.svg" alt="Français" class="w-5 h-4 mr-1"> FR
      </a>
      <a href="/centre-bethesda/en/index.html" class="flex items-center text-gray-500 hover:text-blue-600 font-semibold">
        <img src="https://flagcdn.com/gb.svg" alt="Anglais" class="w-5 h-4 mr-1"> EN
      </a>
    </div>
    <div class="flex flex-col space-y-2 text-sm">
      <a href="index.html" class="text-blue-700 font-semibold">Accueil</a>
      <a href="mission.html" class="text-gray-600 hover:text-blue-600">Mission</a>
      <a href="programmes.html" class="text-gray-600 hover:text-blue-600">Programmes</a>
      <a href="infos pratiques.html" class="text-gray-600 hover:text-blue-600">Infos</a>
      <a href="temoignages.html" class="text-gray-600 hover:text-blue-600">Témoignages</a>
      <a href="contact.html" class="text-gray-600 hover:text-blue-600">Contact</a>
      <a href="reservation.html" class="text-gray-600 hover:text-blue-600">Réservation</a>
    </div>
  </div>
</header>


<!-- CARROUSEL -->
<div class="relative w-full h-96 overflow-hidden" id="carousel">
  <!-- Slide 1 -->
  <div class="w-full h-full absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-100" id="slide1">
    <img src="images/banner1.jpg" alt="Bannière 1" class="w-full h-full object-cover brightness-75">
    <div class="absolute inset-0 flex flex-col justify-center items-center text-white text-center px-4">
      <h1 class="text-4xl md:text-5xl font-semibold">« Venez à moi, vous tous qui êtes fatigués... »</h1>
      <p class="mt-4 text-xl italic">Matthieu 11:28</p>
      <a href="reservation.html" class="mt-8 inline-block bg-yellow-400 text-blue-900 font-bold px-8 py-3 rounded shadow hover:bg-yellow-300 transition">
        Réservez votre retraite
      </a>
    </div>
  </div>
  <!-- Slide 2 -->
  <div class="w-full h-full absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-0" id="slide2">
    <img src="images/banner2.jpg" alt="Bannière 2" class="w-full h-full object-cover brightness-75">
    <div class="absolute inset-0 flex flex-col justify-center items-center text-white text-center px-4">
      <h1 class="text-4xl md:text-5xl font-semibold">« Je suis le chemin, la vérité et la vie. »</h1>
      <p class="mt-4 text-xl italic">Jean 14:6</p>
      <a href="reservation.html" class="mt-8 inline-block bg-yellow-400 text-blue-900 font-bold px-8 py-3 rounded shadow hover:bg-yellow-300 transition">
        Réservez votre retraite
      </a>
    </div>
  </div>
  <!-- Slide 3 -->
  <div class="w-full h-full absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-0" id="slide3">
    <img src="images/banner3.jpg" alt="Bannière 3" class="w-full h-full object-cover brightness-75">
    <div class="absolute inset-0 flex flex-col justify-center items-center text-white text-center px-4">
      <h1 class="text-4xl md:text-5xl font-semibold">« Dieu est notre refuge et notre force. »</h1>
      <p class="mt-4 text-xl italic">Psaume 46:1</p>
      <a href="reservation.html" class="mt-8 inline-block bg-yellow-400 text-blue-900 font-bold px-8 py-3 rounded shadow hover:bg-yellow-300 transition">
        Réservez votre retraite
      </a>
    </div>
  </div>

  <!-- Boutons -->
  <button id="prev" class="absolute top-1/2 left-4 transform -translate-y-1/2 bg-blue-700 text-white p-2 rounded-full hover:bg-blue-800 focus:outline-none">‹</button>
  <button id="next" class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-blue-700 text-white p-2 rounded-full hover:bg-blue-800 focus:outline-none">›</button>

  <!-- Points pagination -->
  <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-3">
    <button class="w-3 h-3 rounded-full bg-white opacity-100" data-slide="1"></button>
    <button class="w-3 h-3 rounded-full bg-white opacity-40" data-slide="2"></button>
    <button class="w-3 h-3 rounded-full bg-white opacity-40" data-slide="3"></button>
  </div>
</div>

<!-- 🎵 Bloc audio dynamique -->
<section id="audio-section" class="relative w-full max-w-3xl mx-auto rounded-lg overflow-hidden shadow-xl my-10">

  <!-- 🖼️ Image de fond -->
  <div id="audio-bg" class="bg-cover bg-center h-48 sm:h-64 transition-all duration-500"
       style="background-image: url('assets/img/matin.jpg');"></div>

  <!-- 🎧 Lecteur -->
  <div class="bg-white p-4 space-y-4">
    <h2 class="text-lg sm:text-xl font-semibold text-gray-800">🎶 Lecteur de prières et chants</h2>

    <select id="trackSelect" class="w-full border rounded px-3 py-2 text-sm">
      <option value="matin">Prière du matin</option>
      <option value="gregorien">Chant grégorien</option>
      <option value="soir">Prière du soir</option>
    </select>

    <div class="flex justify-between items-center">
      <span id="trackLabel" class="text-gray-600 text-sm">Aucune piste en cours</span>
      <button id="playPauseBtn" class="text-blue-700 text-sm font-semibold hover:underline">Écouter</button>
    </div>

    <audio id="audioPlayer" preload="auto"></audio>

    <!-- 📖 Paroles -->
    <div id="lyrics" class="mt-4 text-gray-700 text-sm leading-relaxed whitespace-pre-line border-t pt-3 hidden"></div>
  </div>
</section>

<!-- SECTIONS PRINCIPALES -->
<section class="py-16 px-6 md:px-12 bg-white">
  <div class="max-w-5xl mx-auto text-center space-y-12">
 <div class="space-y-4">
  <!-- Titre -->
  <h2 class="text-2xl font-bold text-blue-700">Notre Mission</h2>

  <!-- Texte descriptif -->
  <p class="text-gray-700">
    Le Centre Bethesda est un sanctuaire pour rencontrer Dieu dans le silence et la prière.
  </p>

  <!-- Image avec overlay légèrement flouté -->
  <div class="relative rounded-lg overflow-hidden shadow-md">
    <img src="images/mission.jpg" alt="Notre mission" class="w-full h-64 object-cover sm:h-80">

    <!-- Overlay sombre + flou très léger -->
    <div class="absolute inset-0 bg-black bg-opacity-40 backdrop-blur-[1px] flex items-center justify-center">
      <a href="mission.html" class="bg-white text-blue-700 font-semibold px-6 py-2 rounded shadow hover:bg-blue-100 transition">
        Découvrez notre mission
      </a>
    </div>
  </div>

  <!-- Lien "En savoir plus" sous l'image -->
  <div class="text-center">
    <a href="mission.html" class="text-blue-600 underline hover:text-blue-800">
      En savoir plus
    </a>
  </div>
</div>


    <div>
<div class="mb-12">
  <h2 class="text-2xl font-bold text-blue-700 mb-2">Nos Programmes</h2>
  <p class="mb-4 text-gray-700">Des retraites adaptées à chaque étape de vie : Carême, guérison intérieure, discernement vocationnel...</p>
<!-- Image avec overlay légèrement flouté -->
<div class="relative rounded-lg overflow-hidden shadow-md mt-6">
  <img src="images/programmes.jpg" alt="Nos programmes" class="w-full h-64 object-cover sm:h-80">

  <!-- Overlay sombre + flou très léger -->
  <div class="absolute inset-0 bg-black bg-opacity-40 backdrop-blur-[1px] flex items-center justify-center">
    <a href="programmes.html" class="bg-white text-blue-700 font-semibold px-6 py-2 rounded shadow hover:bg-blue-100 transition">
      Découvrez nos programmes
    </a>
  </div>
</div>

<!-- Lien "En savoir plus" sous l'image -->
<div class="text-center mt-2">
  <a href="programmes.html" class="text-blue-600 underline hover:text-blue-800">
    Voir les retraites
  </a>
</div>

  
  <!-- DOCUMENTS À TÉLÉCHARGER -->
<div class="mt-12 text-center">
  <h3 class="text-2xl font-bold text-blue-700 mb-4">📄 Documents utiles</h3>
  <p class="mb-6 text-gray-700">Préparez-vous sereinement à votre retraite :</p>

  <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
    <a href="docs/brochure.pdf" download class="bg-white text-blue-700 border border-blue-600 px-5 py-3 rounded hover:bg-blue-50 shadow">
      📘 Télécharger la brochure
    </a>
    <a href="docs/lettre-inscription.pdf" download class="bg-white text-blue-700 border border-blue-600 px-5 py-3 rounded hover:bg-blue-50 shadow">
      📝 Lettre d'inscription
    </a>
    <a href="docs/liste-affaires.pdf" download class="bg-white text-blue-700 border border-blue-600 px-5 py-3 rounded hover:bg-blue-50 shadow">
      🎒 Liste des affaires à emporter
    </a>
  </div>
 </div>
</div>

      
    <div>
      <h2 class="text-2xl font-bold text-blue-700 mb-2">Informations pratiques</h2>
      <p class="mb-4">Découvrez nos conditions d’accueil, les tarifs, les modalités d’accès et plus encore.</p>
      <!-- Image avec overlay légèrement flouté -->
<div class="relative rounded-lg overflow-hidden shadow-md mt-6">
  <img src="images/infos-pratiques.jpg" alt="Informations pratiques" class="w-full h-64 object-cover sm:h-80">

  <!-- Overlay sombre + flou très léger -->
  <div class="absolute inset-0 bg-black bg-opacity-40 backdrop-blur-[1px] flex items-center justify-center">
    <a href="infos pratiques.html" class="bg-white text-blue-700 font-semibold px-6 py-2 rounded shadow hover:bg-blue-100 transition">
      Consultez les informations pratiques
    </a>
  </div>
</div>

<!-- Lien "En savoir plus" sous l'image -->
<div class="text-center mt-2">
  <a href="infos pratiques.html" class="text-blue-600 underline hover:text-blue-800">
    En savoir plus
  </a>
</div>

    </div>
  </div>
</section>

<!-- APPEL À L'ACTION -->
<section class="bg-blue-100 py-16 px-6 md:px-12 text-center">
  <h2 class="text-3xl font-bold text-blue-800 mb-4">Prêt pour un temps de ressourcement spirituel ?</h2>
  <p class="mb-6 text-lg">Inscrivez-vous dès maintenant ou contactez-nous pour plus d’informations.</p>
  <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
    <a href="reservation.html" class="bg-blue-700 text-white px-6 py-3 rounded hover:bg-blue-800 w-full sm:w-auto">Réserver une retraite</a>
    <a href="contact.html" class="bg-white text-blue-700 px-6 py-3 rounded border border-blue-700 hover:bg-blue-50 w-full sm:w-auto">Nous contacter</a>
  </div>
</section>

<!-- ======= Forum d'échanges ======= -->
<section id="forum" class="py-10 px-4 md:px-10 bg-gray-50 rounded-lg shadow-lg max-w-3xl mx-auto mt-10">
  <h2 class="text-2xl md:text-3xl font-bold mb-6 text-center text-blue-800">Forum d'échanges</h2>

  <!-- Utilisateur connecté -->
  <div id="user-display" class="text-sm text-gray-700 mb-6 text-center font-medium">Non connecté</div>

  <!-- Inscription -->
  <form id="register-form" class="space-y-3 mb-6">
    <div class="text-lg font-semibold text-blue-700">Créer un compte</div>
    <input type="email" name="email" placeholder="Email" required class="w-full border rounded px-3 py-2" />
    <input type="password" name="password" placeholder="Mot de passe" required class="w-full border rounded px-3 py-2" />
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full">S'inscrire</button>
  </form>

  <!-- Connexion -->
  <form id="login-form" class="space-y-3 mb-6">
    <div class="text-lg font-semibold text-blue-700">Se connecter</div>
    <input type="email" name="email" placeholder="Email" required class="w-full border rounded px-3 py-2" />
    <input type="password" name="password" placeholder="Mot de passe" required class="w-full border rounded px-3 py-2" />
    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full">Se connecter</button>
  </form>

  <button id="logout-btn" class="mb-6 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 w-full" style="display:none;">Se déconnecter</button>

  <!-- Formulaire message -->
  <form id="forum-form" class="space-y-3 mb-8">
    <input type="text" name="username" placeholder="Nom d'utilisateur" disabled class="w-full border rounded px-3 py-2 bg-gray-100" />
    <textarea name="message" placeholder="Écrivez votre message" required class="w-full border rounded px-3 py-2 min-h-[80px]"></textarea>
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 w-full">Envoyer</button>
  </form>

  <!-- Messages -->
  <div id="forum-messages" class="space-y-4"></div>
</section>


<!-- PARTENAIRES -->
<section class="bg-gradient-to-b from-white via-blue-50 to-white py-20 px-6 md:px-12">
  <div class="max-w-6xl mx-auto text-center">
    <h2 class="text-3xl font-bold text-blue-800 mb-6">Nos partenaires</h2>
    <p class="text-gray-600 mb-12">Nous collaborons avec des institutions engagées dans la croissance spirituelle, l’éducation et le soutien humain.</p>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
      <div class="bg-white shadow-md rounded-xl p-4 hover:scale-105 transform transition duration-300">
        <img src="images/logo1.png" alt="Partenaire 1" class="h-16 mx-auto object-contain grayscale hover:grayscale-0 transition duration-300">
      </div>
      <div class="bg-white shadow-md rounded-xl p-4 hover:scale-105 transform transition duration-300">
        <img src="images/logo2.png" alt="Partenaire 2" class="h-16 mx-auto object-contain grayscale hover:grayscale-0 transition duration-300">
      </div>
      <div class="bg-white shadow-md rounded-xl p-4 hover:scale-105 transform transition duration-300">
        <img src="images/logo3.png" alt="Partenaire 3" class="h-16 mx-auto object-contain grayscale hover:grayscale-0 transition duration-300">
      </div>
      <div class="bg-white shadow-md rounded-xl p-4 hover:scale-105 transform transition duration-300">
        <img src="images/logo4.png" alt="Partenaire 4" class="h-16 mx-auto object-contain grayscale hover:grayscale-0 transition duration-300">
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="bg-gray-900 text-white py-10 px-6 mt-16">
  <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between space-y-6 md:space-y-0">
    
    <!-- Logo -->
    <div class="flex items-center space-x-4">
      <img src="images/logo.png" alt="Logo Centre Bethesda" class="w-16 h-16 object-contain rounded-full shadow-lg">
      <div>
        <h2 class="text-lg font-semibold tracking-wide uppercase">Centre Bethesda</h2>
        <p class="text-sm text-gray-300">Retraites spirituelles & transformation intérieure</p>
      </div>
    </div>

    <!-- Droits réservés -->
    <p class="text-sm text-gray-400 text-center md:text-right">
      &copy; 2025 Centre de Retraite Spirituelle Bethesda. Tous droits réservés.
    </p>
  </div>
</footer>

<!-- SCRIPT CARROUSEL -->
<script>
  let currentSlide = 1;
  const totalSlides = 3;
  const slides = [1, 2, 3];
  const intervalTime = 5000;
  let interval;

  function showSlide(n) {
    slides.forEach(i => {
      document.getElementById(`slide${i}`).style.opacity = i === n ? '1' : '0';
      const dot = document.querySelector(`button[data-slide="${i}"]`);
      if(dot) dot.style.opacity = i === n ? '1' : '0.4';
    });
    currentSlide = n;
  }

  function nextSlide() {
    let next = currentSlide === totalSlides ? 1 : currentSlide + 1;
    showSlide(next);
  }

  function prevSlide() {
    let prev = currentSlide === 1 ? totalSlides : currentSlide - 1;
    showSlide(prev);
  }

  document.getElementById('next').addEventListener('click', () => {
    nextSlide();
    resetInterval();
  });

  document.getElementById('prev').addEventListener('click', () => {
    prevSlide();
    resetInterval();
  });

  document.querySelectorAll('[data-slide]').forEach(button => {
    button.addEventListener('click', () => {
      const slideNum = Number(button.getAttribute('data-slide'));
      showSlide(slideNum);
      resetInterval();
    });
  });

  function resetInterval() {
    clearInterval(interval);
    interval = setInterval(nextSlide, intervalTime);
  }

  interval = setInterval(nextSlide, intervalTime);
  showSlide(1);
</script>

<script>
  // Fonction pour la date et l'heure en français
  function updateDateTime() {
    const now = new Date();
    const jourSemaine = now.toLocaleDateString('fr-FR', { weekday: 'long' });
    const jour = now.getDate();
    const mois = now.toLocaleDateString('fr-FR', { month: 'long' });
    const annee = now.getFullYear();
    const heure = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });

    const dateComplete = `${jourSemaine.charAt(0).toUpperCase() + jourSemaine.slice(1)} ${jour} ${mois} ${annee} ${heure}`;
    document.getElementById('datetime').textContent = dateComplete;
  }

  // Liste des versets (tu peux en ajouter autant que tu veux)
  const verses = [
    "📖 « L'Éternel est mon berger : je ne manquerai de rien. » – Psaume 23:1",
    "📖 « Je puis tout par celui qui me fortifie. » – Philippiens 4:13",
    "📖 « Ne vous inquiétez de rien. » – Philippiens 4:6",
    "📖 « Car je connais les projets que j'ai formés sur vous. » – Jérémie 29:11",
    "📖 « Jésus lui dit : Je suis le chemin, la vérité, et la vie. » – Jean 14:6",
    "📖 « Venez à moi, vous tous qui êtes fatigués. » – Matthieu 11:28",
    "📖 « Dieu est notre refuge et notre force. » – Psaume 46:1",
    "📖 « Sois fort et courageux. » – Josué 1:9",
    "📖 « L’Éternel combattra pour vous. » – Exode 14:14",
    "📖 « Que tout ce qui respire loue l’Éternel ! » – Psaume 150:6",
    "📖 « L’amour est patient, il est plein de bonté. » – 1 Corinthiens 13:4",
    "📖 « Confie-toi en l’Éternel de tout ton cœur. » – Proverbes 3:5",
    "📖 « Le Seigneur est bon, sa fidélité dure toujours. » – Psaume 100:5",
    "📖 « Approchez-vous de Dieu, et il s’approchera de vous. » – Jacques 4:8",
    "📖 « L’Éternel est mon rocher, ma forteresse. » – Psaume 18:2",
    "📖 « Ceux qui espèrent en l’Éternel renouvellent leur force. » – Ésaïe 40:31",
    "📖 « Il guérit ceux qui ont le cœur brisé. » – Psaume 147:3",
    "📖 « Ta parole est une lampe à mes pieds. » – Psaume 119:105",
    "📖 « Soyez toujours joyeux. » – 1 Thessaloniciens 5:16",
    "📖 « L’Éternel est près de ceux qui ont le cœur brisé. » – Psaume 34:18",
    "📖 « Il n’y a donc maintenant aucune condamnation. » – Romains 8:1",
    "📖 « Mon âme se repose en paix sur Dieu seul. » – Psaume 62:1",
    "📖 « Recommande ton sort à l’Éternel, mets en lui ta confiance. » – Psaume 37:5",
    "📖 « L’Éternel est mon secours, je ne craindrai rien. » – Hébreux 13:6",
    "📖 « Le fruit de l’Esprit, c’est l’amour, la joie, la paix… » – Galates 5:22",
    "📖 « Dieu est amour. » – 1 Jean 4:8",
    "📖 « Jésus-Christ est le même hier, aujourd’hui, et éternellement. » – Hébreux 13:8",
    "📖 « Il fait concourir toutes choses au bien de ceux qui l’aiment. » – Romains 8:28",
    "📖 « L’Éternel est ma lumière et mon salut. » – Psaume 27:1",
    "📖 « Heureux ceux qui ont faim et soif de justice. » – Matthieu 5:6",
    "📖 « Demeurez dans mon amour. » – Jean 15:9",
    "📖 « Soyez remplis de l’Esprit. » – Éphésiens 5:18"
];

  // Fonction pour choisir un verset différent chaque jour
  function setDailyVerse() {
  const today = new Date();
  const index = (today.getDate() - 1) % verses.length; // décalage d'1 pour commencer à 0
  document.getElementById('verse').textContent = verses[index];
}

  // Exécution
  updateDateTime();
  setInterval(updateDateTime, 1000);
  setDailyVerse();
</script>
  
<!-- SCRIPT POUR LE MENU MOBILE -->
<script>
  const menuToggle = document.getElementById("menu-toggle");
  const mobileMenu = document.getElementById("mobile-menu");

  menuToggle.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
  });
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
  import { getFirestore, collection, addDoc, serverTimestamp, onSnapshot, query, orderBy, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBfvjITf4NQyGYUWThoZUZTzPDzzqXF4yo",
    authDomain: "centre-bethesda.firebaseapp.com",
    projectId: "centre-bethesda",
    storageBucket: "centre-bethesda.appspot.com",
    messagingSenderId: "46907722860",
    appId: "1:46907722860:web:3e74127f80f361e4d81c49"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const registerForm = document.getElementById('register-form');
  const loginForm = document.getElementById('login-form');
  const logoutBtn = document.getElementById('logout-btn');
  const forumForm = document.getElementById('forum-form');
  const userDisplay = document.getElementById('user-display');
  const messagesDiv = document.getElementById('forum-messages');

  registerForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = registerForm.email.value;
    const password = registerForm.password.value;
    try {
      await createUserWithEmailAndPassword(auth, email, password);
      alert('Inscription réussie !');
      registerForm.reset();
    } catch (error) {
      alert('Erreur inscription : ' + error.message);
    }
  });

  loginForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = loginForm.email.value;
    const password = loginForm.password.value;
    try {
      await signInWithEmailAndPassword(auth, email, password);
      alert('Connexion réussie !');
      loginForm.reset();
    } catch (error) {
      alert('Erreur connexion : ' + error.message);
    }
  });

  logoutBtn?.addEventListener('click', () => signOut(auth));

  onAuthStateChanged(auth, (user) => {
    if (user) {
      userDisplay.textContent = `Connecté en tant que : ${user.email}`;
      logoutBtn.style.display = 'inline-block';
      forumForm.username.value = user.email;
      forumForm.username.disabled = true;
    } else {
      userDisplay.textContent = 'Non connecté';
      logoutBtn.style.display = 'none';
      forumForm.username.value = '';
      forumForm.username.disabled = false;
    }
  });

  forumForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const message = forumForm.message.value.trim();
    const user = auth.currentUser;
    if (!user) return alert('Vous devez être connecté pour poster un message.');
    if (!message) return;

    try {
      await addDoc(collection(db, "messages"), {
        uid: user.uid,
        username: user.email,
        message,
        timestamp: serverTimestamp()
      });
      forumForm.message.value = '';
    } catch (error) {
      console.error("Erreur Firestore :", error);
      alert("Échec de l'envoi du message.");
    }
  });

  const q = query(collection(db, "messages"), orderBy("timestamp", "desc"));
  onSnapshot(q, (snapshot) => {
    messagesDiv.innerHTML = '';
    snapshot.forEach(docSnap => {
      const data = docSnap.data();
      const el = createMessageElement(docSnap.id, data);
      messagesDiv.appendChild(el);
    });
  });

  function createMessageElement(id, data) {
    const container = document.createElement('div');
    container.style.border = "1px solid #ccc";
    container.style.padding = "10px";
    container.style.background = "#f9f9f9";

    const meta = document.createElement('small');
    meta.innerHTML = `<strong>${data.username}</strong> — ${formatDate(data.timestamp)}`;

    const content = document.createElement('p');
    content.textContent = data.message;

    container.appendChild(meta);
    container.appendChild(content);

    const user = auth.currentUser;
    if (user && user.uid === data.uid) {
      const editBtn = document.createElement('button');
      editBtn.textContent = "Modifier";
      editBtn.onclick = () => editMessage(id, content);

      const delBtn = document.createElement('button');
      delBtn.textContent = "Supprimer";
      delBtn.onclick = () => deleteDoc(doc(db, "messages", id));

      container.appendChild(editBtn);
      container.appendChild(delBtn);
    }

    return container;
  }

  function editMessage(id, contentEl) {
    const old = contentEl.textContent;
    const ta = document.createElement('textarea');
    ta.value = old;
    contentEl.replaceWith(ta);

    const saveBtn = document.createElement('button');
    saveBtn.textContent = "Enregistrer";
    ta.after(saveBtn);

    saveBtn.onclick = async () => {
      const newText = ta.value.trim();
      if (newText) {
        await updateDoc(doc(db, "messages", id), {
          message: newText,
          edited: serverTimestamp()
        });
        saveBtn.remove();
        ta.replaceWith(contentEl);
        contentEl.textContent = newText;
      }
    };
  }

  function formatDate(ts) {
    if (!ts) return '';
    return new Date(ts.seconds * 1000).toLocaleString('fr-FR', {
      day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit'
    });
  }
</script>

<script>
  const audio = document.getElementById("audioPlayer");
  const trackSelect = document.getElementById("trackSelect");
  const playPauseBtn = document.getElementById("playPauseBtn");
  const trackLabel = document.getElementById("trackLabel");
  const audioBg = document.getElementById("audio-bg");
  const lyrics = document.getElementById("lyrics");

  const tracks = {
    matin: {
      label: "Prière du matin",
      src: "assets/audio/priere-matin.mp3",
      bg: "assets/img/matin.jpg",
      text: `Seigneur, en ce matin nouveau,\nJe me tourne vers Toi avec confiance.\nRemplis mon cœur de Ta paix et guide mes pas.\nSois la lumière de ma journée. Amen.`
    },
    gregorien: {
      label: "Chant grégorien",
      src: "assets/audio/chant-gregorien.mp3",
      bg: "assets/img/gregorien.jpg",
      text: `Gloria in excelsis Deo\nEt in terra pax hominibus bonae voluntatis\nLaudamus te, benedicimus te, adoramus te`
    },
    soir: {
      label: "Prière du soir",
      src: "assets/audio/priere-soir.mp3",
      bg: "assets/img/soir.jpg",
      text: `Seigneur, merci pour cette journée écoulée.\nPardonne mes erreurs et accorde-moi le repos.\nVeille sur mes proches cette nuit. Amen.`
    }
  };

  let isPlaying = false;

  function updateTrack(name) {
    const track = tracks[name];
    if (!track) return;

    audio.src = track.src;
    audioBg.style.backgroundImage = `url('${track.bg}')`;
    lyrics.textContent = track.text;
    lyrics.classList.remove("hidden");

    trackLabel.textContent = track.label;
    playPauseBtn.textContent = "Écouter";
    isPlaying = false;
    audio.pause();
  }

  trackSelect.addEventListener("change", (e) => {
    updateTrack(e.target.value);
  });

  playPauseBtn.addEventListener("click", () => {
    if (isPlaying) {
      audio.pause();
      playPauseBtn.textContent = "Écouter";
    } else {
      audio.play();
      playPauseBtn.textContent = "Pause";
    }
    isPlaying = !isPlaying;
  });

  audio.addEventListener("ended", () => {
    isPlaying = false;
    playPauseBtn.textContent = "Écouter";
  });

  // Initialisation
  updateTrack(trackSelect.value);
</script>

  
</body>
</html>
